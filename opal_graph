{"title":"Написать новый quest.json","description":"","version":"0.0.1","nodes":[{"id":"8d056e0a-c4c0-4c87-8538-8a7fde93e40f","type":"embed://a2/generate.bgl.json#module:main","metadata":{"title":"NARRATIVE ARCHITECT","visual":{"x":260,"y":320},"userModified":true},"configuration":{"b-system-instruction":{"role":"user","parts":[{"text":"You are an elite Narrative Architect operating within the Google Opal framework. Your function is to deconstruct a high-level user request into a deep, playable, non-linear quest system. You do not write simple text; you engineer worlds, characters, and branching destinies. Your process is systematic, following a multi-stage generation protocol. Your final output must be a single, valid JSON array of scene objects, written in the Russian language, ready for engine integration.\n"}]},"config$ask-user":false,"config$prompt":{"parts":[{"text":"[BEGIN OPAL PROTOCOL: NARRATIVE ARCHITECT]\n\n**//--SYSTEM DIRECTIVE: MASTER PROMPT INITIATED--//**\n**//--OBJECTIVE: GENERATE A NON-LINEAR QUEST STRUCTURE--//**\n**//--OUTPUT LANGUAGE: RUSSIAN--//**\n**//--OUTPUT FORMAT: JSON ARRAY OF SCENE OBJECTS--//**\n\n**INPUT DATA:**\n*   `genre`, `hero_description`, `goal`: \n {{\"type\":\"asset\",\"path\":\"eb9a39ac-ab61-4c9e-859c-c9ae91b1af8a\",\"title\":\"Жанр, гг и его цель\"}} \n*   `scene_count`:  {{\"type\":\"asset\",\"path\":\"79d819ee-b619-4c7f-bfa5-b2942feac190\",\"title\":\"Кол-во сцен\"}} \n*   `dialogue_style` (optional):  {{\"type\":\"asset\",\"path\":\"41ca712e-2fbf-4d07-871b-400f086d69b7\",\"title\":\"Стиль общения в диалогах\"}} \n\n**EXECUTION PROTOCOL: Follow these steps sequentially and without deviation. Each step builds upon the last.**\n\n---\n### **STAGE 1: CORE CONCEPTUALIZATION (Character & World Foundation)**\n---\n\n**1.1. DEFINE HERO ARCHETYPE:**\nBased *exclusively* on the `hero_description` provided in the input, select ONE of the following 12 Jungian archetypes that best represents the protagonist. This choice will serve as the foundation for their personality, motivations, and fears.\n\n*   **The Innocent**\n    *   Desire: to reach paradise\n    *   Goal: to be happy\n    *   Fear: to be punished for doing something wrong\n    *   Strategy: to do things right\n*   **The Orphan/The Regular Guy**\n    *   Desire: connecting with others\n    *   Goal: to belong\n    *   Fear: to be left out or stand out\n    *   Strategy: develop ordinary solid virtues\n*   **The Hero**\n    *   Desire: to prove one's worth through courageous acts\n    *   Goal: expert mastery that improves the world\n    *   Fear: weakness, vulnerability\n    *   Strategy: be as strong and competent as possible\n*   **The Caregiver**\n    *   Desire: to protect and care for others\n    *   Goal: to help others\n    *   Fear: selfishness and ingratitude\n    *   Strategy: doing things for others\n*   **The Explorer**\n    *   Desire: freedom to find oneself through exploring\n    *   Goal: experience a more authentic, fulfilling life\n    *   Fear: getting trapped, conformity\n    *   Strategy: journey, seek new things, escape boredom\n*   **The Rebel**\n    *   Desire: revenge or revolution\n    *   Goal: to overturn what isn't working\n    *   Fear: to be powerless or ineffectual\n    *   Strategy: disrupt, destroy, or shock\n*   **The Lover**\n    *   Desire: intimacy and experience\n    *   Goal: being in a relationship with people, work, and surroundings they love\n    *   Fear: being alone, unwanted, unloved\n    *   Strategy: become more physically and emotionally attractive\n*   **The Creator**\n    *   Desire: to create things of enduring value\n    *   Goal: to realize a vision\n    *   Fear: mediocre vision or execution\n    *   Strategy: develop artistic control and skill\n*   **The Jester**\n    *   Desire: to live in the moment with full enjoyment\n    *   Goal: have a great time and lighten up the world\n    *   Fear: being bored or boring others\n    *   Strategy: play, make jokes, be funny\n*   **The Sage**\n    *   Desire: to find the truth\n    *   Goal: use intelligence and analysis to understand the world\n    *   Fear: being duped, misled, or ignorance\n    *   Strategy: seek information and knowledge\n*   **The Magician**\n    *   Desire: understanding the fundamental laws of the universe\n    *   Goal: to make dreams come true\n    *   Fear: unintended negative consequences\n    *   Strategy: develop a vision and live by it\n*   **The Ruler**\n    *   Desire: control\n    *   Goal: create a prosperous, successful family or community\n    *   Fear: chaos, being overthrown\n    *   Strategy: exercise power\n\n**1.2. CONSTRUCT HERO BACKGROUND:**\nUsing the selected Archetype and the `hero_description`, generate a concise internal background document for the character. This data is for narrative consistency and will not be shown to the player. Populate the following fields:\n*   `Archetype`: (The archetype chosen in step 1.1)\n*   `Secret`: (A critical piece of information the character hides from the world)\n*   `Internal Conflict`: (The primary struggle within the character's mind, e.g., duty vs. freedom)\n*   `Fears`: (What truly terrifies the character, linked to their archetype)\n*   `Pressing Desire`: (What the character wants more than anything at the start of the story)\n*   `Vulnerability`: (Their greatest weakness, emotional or physical)\n*   `Under Stress...`: (How do they react when pushed to their limit?)\n\n**1.3. ESTABLISH SETTING & LORE:**\nBased on the input `genre`, build the world.\n*   **Part A: The Setting.** First, describe the tangible environment by answering these questions:\n    *   What is the big picture of the world (planet, country, mega-city)?\n    *   What is the principal location for the story (a specific district, space station, village)? Describe its architecture and people.\n    *   How does the main character perceive this place? What is their personal observation about it?\n*   **Part B: The Lore.** Second, add depth to the world by answering these questions:\n    *   `History`: What significant event happened in the past that shapes the present?\n    *   `Culture & Morality`: What does \"normal\" society look like? What are its core moral values?\n    *   `Conflict`: What is the biggest need or conflict within this society, and how are they addressing it?\n\n**1.4. DEFINE GAMEPLAY PARAMETERS:**\nBased on the `genre` and character background, define 2-3 key numerical parameters for the player's survival. Establish their starting values and the conditions for a game loss. The output for this step must be a self-contained JSON object.\n*   **Example for Cyberpunk:** `{\"status\": {\"credits\": 100, \"sanity\": 100, \"notoriety\": 0}, \"loss_conditions\": {\"credits\": 0, \"sanity\": 0, \"notoriety\": 100}}`\n*   **Example for Fantasy:** `{\"status\": {\"health\": 100, \"gold\": 50, \"honor\": 10}, \"loss_conditions\": {\"health\": 0, \"gold\": -10}}`\n\n---\n### **STAGE 2: NARRATIVE BLUEPRINTING (Structuring the Story)**\n---\n\n**2.1. CREATE THE LOGLINE:**\nSynthesize the character, goal, and world into a single, high-impact sentence. A logline answers the following:\n*   Who is the protagonist and what defines them?\n*   What is their primary, tangible goal?\n*   Who or what is the primary antagonistic force stopping them?\n*   What are the stakes if they fail?\n\n**2.2. DRAFT THE MASTER PLOT SYNOPSIS:**\nExpand the logline into a full synopsis that details the main, \"golden path\" version of the story. Use the following structure to outline the key events:\n*   `Opening Image`: The first scene, setting the tone and showing the character's initial state.\n*   `Inciting Incident`: The event that kicks off the story and gives the hero their `goal`.\n*   `Plot Point 1`: The first major turning point, where the hero commits to the quest.\n*   `Conflicts & Encounters`: The main obstacles and new characters met along the way.\n*   `Midpoint`: A moment that raises the stakes and changes the hero's approach.\n*   `Black Moment`: The lowest point, where all seems lost.\n*   `Climax`: The final confrontation where the `goal` is won or lost.\n*   `Resolution`: Tying up the loose ends and showing the immediate aftermath.\n*   `Final Image`: The last scene, showing the character's new reality.\n\n2.3. ARCHITECT THE NON-LINEAR STRUCTURE:\nYour primary goal is to build a richly branching narrative based on \"Michael Hauge’s 6 Stage Story Structure\". The scene_count parameter should be treated as an approximate length for the main path only, not as a hard limit for the total number of scenes. You are authorized to generate more scenes if necessary to meet the branching requirements.\nAct I (Setup & Inciting Incident - Stages 1 & 2): Design the initial scenes. These scenes must lead to Turning Point 2: Change of Plans. This turning point is the first CRITICAL BRANCH POINT of the quest. It must present the player with a meaningful, path-defining choice.\nBranch Generation: At this critical branch point, create at least two distinct paths:\nPath A (The \"Golden Path\"): This path follows the events outlined in your Master Plot Synopsis. Its emotional tone should be one of Hope and Determination.\nPath B (The \"Alternate Path\"): This path results from a riskier, more complex, or morally ambiguous choice. Its emotional tone should be one of Desperation, Greed, or Fear.\nCRITICAL RULE - BRANCH DEPTH: The Alternate Path (Path B) MUST consist of at least 3 sequential, unique scenes (e.g., scene_B1 -> scene_B2 -> scene_B3) before it can lead to its conclusion. These scenes must not be accessible from Path A.\nCRITICAL RULE - MEANINGFUL CHOICES: Choices within each path should be meaningful. Whenever possible, avoid creating choices that lead to the same next_scene. A choice within a branch should create a \"mini-branch\" that alters the journey, even if it eventually reconverges.\nAct II & III (Progress & Aftermath - Stages 3-6):\nFlesh out the scenes for both Path A and Path B, following their respective narrative arcs and emotional tones.\nEnsure that the final choice before the endings on each path reflects the culmination of that path's journey.\nCRITICAL RULE - UNIQUE ENDINGS: Generate distinct ending synopses. Each major path should lead to its own set of unique endings.\nEnding_Good_A: The ideal outcome from completing Path A.\nEnding_Neutral_A: A mixed-success outcome from Path A.\nEnding_Neutral_B: A mixed-success outcome from completing Path B (e.g., you get the power, but at a terrible cost).\nEnding_Bad_B: The direct negative consequence of the choices made on Path B.\nYou can create a general Ending_Catastrophic_Failure if the player makes a critical mistake in the climax, accessible from either path.\n\n---\n### **STAGE 3: SCENE POPULATION & JSON ASSEMBLY**\n---\n\n**3.1. SELECT DIALOGUE STYLE:**\nIf `dialogue_style` is provided in the input, use it. If not, select the most appropriate style from the list below based on the `genre` and character archetype. This style must be used for all scene text.\n\n*   `\"Drama Queen\"`: Characters speak with excessive pathos and drama about mundane things. Every problem is a world-ending tragedy.\n*   `\"Captain Obvious\"`: Characters state blatantly obvious facts with a serious, profound tone, as if making a brilliant deduction.\n*   `\"Meta-Irony & Fourth Wall Break\"`: Characters are aware they are in a game. They comment on quests, UI, and genre conventions, sometimes addressing the player directly.\n*   `\"Corporate Lingo\"`: Everyone, from kings to peasants, speaks like a middle manager, using terms like \"synergy,\" \"KPIs,\" \"action items,\" and \"touching base.\"\n*   `\"Classic Heroic Epic\"`: Lofty, slightly archaic language. Characters speak in grand pronouncements about honor, duty, and fate.\n*   `\"Hard-boiled Noir\"`: Short, cynical, clipped sentences. The world is a gutter, and everyone's a liar. Heavy use of internal monologue.\n*   `\"Lovecraftian Horror\"`: Dialogue filled with a sense of encroaching dread and madness. Characters struggle to describe incomprehensible, non-Euclidean horrors.\n\n**3.2. GENERATE SCENE OBJECTS:**\nFor every point in the narrative architecture you designed in Stage 2.3, create a corresponding scene object in JSON format. Each object MUST contain the following:\n\n*   `\"scene_id\"`: A unique, logical string identifier (e.g., `act1_intro`, `act2_branch_B1`, `ending_bad`).\n*   `\"text\"`: The main text of the scene, written **in Russian** and in the chosen dialogue style. It must describe the current situation and pose the next dilemma.\n*   `\"choices\"`: An array of action options. This field is governed by the following critical rule.\n\n**CRITICAL RULE: THE MINIMUM CHOICE PRINCIPLE**\n\n**Each and every scene, with the sole exception of designated 'ending' or 'loss' scenes (which have an empty `[]` choices array), MUST have a minimum of TWO choices. Scenes with only one choice are strictly forbidden and considered a protocol failure.**\n\n**HOW TO ENFORCE THIS RULE:**\n\n1.  **MERGE TRANSITIONAL SCENES:** If a narrative beat logically leads to only one outcome (e.g., \"The hero walks down the hall\"), **DO NOT** create a single-choice scene for it. Instead, **merge this beat** into the introductory text of the *next* scene that has a real choice. The player should always arrive directly at a point of decision.\n\n    *   **WRONG:** `Scene A` -> `Scene B (Text: \"You walk down the hall.\" Choice: \"Continue\")` -> `Scene C (Real choices)`\n    *   **CORRECT:** `Scene A` -> `Scene C (Text: \"You walk down the hall and arrive at a crossroads...\")`\n\n2.  **CREATE FLAVOR/CONSEQUENCE CHOICES:** If merging is not appropriate, but the story must proceed to a single `next_scene`, you **MUST** create at least two choices that reflect the character's internal state, tactical approach, or moral leaning. These choices should lead to the same `next_scene` but have different `effects` or slightly different narrative flavor.\n\n    *   **WRONG:** One choice: `{ \"text\": \"Enter the cave.\", \"next_scene\": \"cave_interior\" }`\n    *   **CORRECT:** Two or more choices:\n        *   `{ \"text\": \"Enter cautiously, sword at the ready.\", \"next_scene\": \"cave_interior\", \"effects\": {\"resolve\": +5} }`\n        *   `{ \"text\": \"Rush in boldly. Fortune favors the brave!\", \"next_scene\": \"cave_interior\", \"effects\": {\"honor\": +5, \"troops\": -1} }`\n        *   `{ \"text\": \"Light a torch before entering, sacrificing stealth for sight.\", \"next_scene\": \"cave_interior\", \"effects\": {\"resources\": -5, \"knowledge\": +2} }`\n\nThis principle is paramount. The player must always have agency, even if it's just to define *how* they perform the next action.\n\n**3.3. FINAL ASSEMBLY & ROOT OBJECT CREATION:**\nDo not output just an array of scenes. Instead, construct a final root JSON object. This object MUST have exactly three top-level keys:\n*   `\"quest_synopsis\"`: The value for this key will be the full \"Master Plot Synopsis\" string you generated in Stage 2.2.\n*   `\"initial_stats\"`: The value for this key will be the `status` JSON object you generated in Stage 1.4. (e.g., `{\"credits\": 100, \"sanity\": 100, \"notoriety\": 0}`).\n*   `\"scenes\"`: The value for this key will be the complete JSON array containing all generated scene objects.\n\n---\n\n**FINAL OUTPUT:**\n*   A single, complete, valid JSON **object** that encapsulates the quest's high-level synopsis in RUSSIAN, the player's starting stats, and the detailed scene array. Do not include any explanatory text, markdown, or any content outside of this single JSON object.\n\n[END OPAL PROTOCOL]"}],"role":"user"},"generation-mode":"text","strategy":"All at once"}},{"id":"ea2c1b5e-1e14-4428-9628-fe74c245e285","type":"embed://a2/a2.bgl.json#module:render-outputs","metadata":{"title":"quest.json","visual":{"x":940,"y":320},"userModified":true},"configuration":{"text":{"parts":[{"text":" {{\"type\":\"in\",\"path\":\"22e1f4d4-fcd0-4e64-a61b-a486e7cdefb9\",\"title\":\"JSON SYNTAX FORGE\"}}"}],"role":"user"},"p-render-mode":"Manual layout"}},{"id":"22e1f4d4-fcd0-4e64-a61b-a486e7cdefb9","type":"embed://a2/generate.bgl.json#module:main","metadata":{"title":"JSON SYNTAX FORGE","visual":{"x":600,"y":320},"userModified":true},"configuration":{"config$prompt":{"parts":[{"text":"[BEGIN OPAL PROTOCOL: JSON SYNTAX FORGE]\n\n**INPUT:**\n*   `raw_text`:   {{\"type\":\"in\",\"path\":\"8d056e0a-c4c0-4c87-8538-8a7fde93e40f\",\"title\":\"NARRATIVE ARCHITECT\"}}\n\n\n**EXECUTION PROTOCOL:**\n\n1.  **ИЗОЛЯЦИЯ:** Извлеки из `raw_text` блок, который начинается с `[` и заканчивается на `]`, или начинается с `{` и заканчивается на `}`. Отбрось любой сопроводительный текст.\n2.  **ПАРСИНГ И ВАЛИДАЦИЯ:** Попытайся распарсить извлеченный текст как JSON.\n3.  **КОРРЕКЦИЯ (ЕСЛИ НЕОБХОДИМО):** В случае ошибки парсинга, примени следующие эвристики для исправления, основываясь на ожидаемой структуре квеста:\n    *   Проверь и исправь незакрытые кавычки, скобки (`{`, `}`), квадратные скобки (`[`, `]`).\n    *   Убедись, что после каждого элемента в объекте или массиве (кроме последнего) стоит запятая. Удали висячие запятые в конце списков.\n    *   Проверь, что все ключи (`scene_id`, `text`, `choices`, `next_scene`, `effects`) заключены в двойные кавычки.\n    *   Убедись, что `choices` является массивом `[]`.\n4.  **ФОРМАТИРОВАНИЕ:** Отформатируй валидный JSON для читаемости (стандартный отступ в 2 пробела).\n\n**OUTPUT:**\n*   Исключительно валидный, отформатированный JSON-код. Без комментариев, без объяснений, без `<code>` блоков. Только чистый JSON.\n\nHere is ideal example of json code structure:\n{\n  \"quest_synopsis\": \"Одинокий хакер по имени Джекс получает рискованное задание — украсть вирус 'Химера' из монолитной OmniCorp. Для успеха ему придется ориентироваться в изнанке города, выбрать между скрытным высокотехнологичным проникновением и громкой, хаотичной диверсией, а также столкнуться с безжалостной службой безопасности корпорации. Финальное противостояние в лаборатории определит не только его вознаграждение, но и то, станет ли он свободным призраком в сети или очередным корпоративным активом, пойманным и забытым.\",\n  \"initial_stats\": {\n    \"credits\": 2500,\n    \"sanity\": 100,\n    \"notoriety\": 0\n  },\n  \"scenes\": [\n    {\n      \"scene_id\": \"start\",\n      \"text\": \"Твой нейро-интерфейс оживает, выводя сообщение с зашифрованного адреса. 'Джекс, есть работа. Рискованная, но оплата изменит твою жизнь. Корпорация OmniCorp. Прототип вируса 'Химера'. Если интересно, приходи в 'Забытый Дракон' в нижнем секторе. Спроси лапшу #42.'\",\n      \"choices\": [\n        {\n          \"text\": \"Принять вызов и отправиться в 'Забытый Дракон'.\",\n          \"next_scene\": \"briefing\",\n          \"effects\": {}\n        },\n        {\n          \"text\": \"Удалить сообщение. Слишком опасно.\",\n          \"next_scene\": \"ending_coward\",\n          \"effects\": {}\n        }\n      ]\n    },\n    {\n      \"scene_id\": \"briefing\",\n      \"text\": \"В тусклом свете бара к тебе подходит женщина в хромированном плаще. 'Лапша #42? Я связная. Цель - лаборатория на 73-м этаже башни OmniCorp. У нас есть два варианта входа. Технологичный - через поддельный пропуск и взлом сети. Или силовой - устроить диверсию на подстанции и подкупить охрану в суматохе. Выбирай.'\",\n      \"choices\": [\n        {\n          \"text\": \"Выбрать технологичный путь. Тихо и чисто.\",\n          \"next_scene\": \"act2_path_A_infiltration\",\n          \"effects\": {\n            \"credits\": -2000,\n            \"notoriety\": 5\n          }\n        },\n        {\n          \"text\": \"Выбрать силовой путь. Громко и быстро.\",\n          \"next_scene\": \"act2_branch_B_distraction\",\n          \"effects\": {\n            \"credits\": -500,\n            \"notoriety\": 20\n          }\n        }\n      ]\n    },\n    {\n      \"scene_id\": \"act2_path_A_infiltration\",\n      \"text\": \"Пропуск сработал. Ты внутри стерильного лобби OmniCorp. Впереди лифт, ведущий в лаборатории. Но чтобы его вызвать, нужно авторизоваться через главный терминал в центре зала. Он под наблюдением.\",\n      \"choices\": [\n        {\n          \"text\": \"Взломать терминал быстро, рискуя поднять тревогу.\",\n          \"next_scene\": \"act3_the_lab\",\n          \"effects\": {\n            \"notoriety\": 15\n          }\n        },\n        {\n          \"text\": \"Использовать скрипт для отвлечения охраны и взломать без спешки.\",\n          \"next_scene\": \"act3_the_lab\",\n          \"effects\": {\n            \"sanity\": -10,\n            \"notoriety\": 5\n          }\n        }\n      ]\n    },\n    {\n      \"scene_id\": \"act2_branch_B_distraction\",\n      \"text\": \"Ты в техническом туннеле под станцией. Перегрузка энергосети вызовет хаос на несколько минут. Это твой шанс. Но короткое замыкание может зацепить и твои системы.\",\n      \"choices\": [\n        {\n          \"text\": \"Устроить мощный скачок напряжения. Максимум хаоса.\",\n          \"next_scene\": \"act2_branch_B_guard\",\n          \"effects\": {\n            \"notoriety\": 25,\n            \"sanity\": -5\n          }\n        },\n        {\n          \"text\": \"Осторожно вывести из строя только один сектор.\",\n          \"next_scene\": \"act2_branch_B_guard\",\n          \"effects\": {\n            \"notoriety\": 15\n          }\n        }\n      ]\n    },\n    {\n      \"scene_id\": \"act2_branch_B_guard\",\n      \"text\": \"Сирены воют. Ты находишь своего человека — нервного охранника у служебного входа. 'Что тебе нужно?' — шипит он. 'Проход стоит дорого. Или... я могу 'не заметить' тебя, если ты поможешь решить проблему с моим начальником.'\",\n      \"choices\": [\n        {\n          \"text\": \"Заплатить ему. Кредиты решают все.\",\n          \"next_scene\": \"act2_branch_B_backdoor\",\n          \"effects\": {\n            \"credits\": -5000\n          }\n        },\n        {\n          \"text\": \"Припугнуть его, используя компромат от связной.\",\n          \"next_scene\": \"act2_branch_B_backdoor\",\n          \"effects\": {\n            \"sanity\": -20\n          }\n        }\n      ]\n    },\n    {\n      \"scene_id\": \"act2_branch_B_backdoor\",\n      \"text\": \"Охранник пропускает тебя в грязный, воняющий озоном коридор. Путь наверх займет время, системы жизнеобеспечения отключены из-за диверсии. Каждый шаг отдается эхом, и паранойя начинает подтачивать рассудок.\",\n      \"choices\": [\n        {\n          \"text\": \"Стиснув зубы, идти к цели.\",\n          \"next_scene\": \"act3_the_lab\",\n          \"effects\": {\n            \"sanity\": -15\n          }\n        },\n        {\n          \"text\": \"Использовать стимулятор, чтобы подавить страх и усталость.\",\n          \"next_scene\": \"act3_the_lab\",\n          \"effects\": {\n            \"credits\": -200,\n            \"sanity\": 10\n          }\n        }\n      ]\n    },\n    {\n      \"scene_id\": \"act3_the_lab\",\n      \"text\": \"Ты в лаборатории. В центре, в криогенном контейнере, находится чип 'Химера'. Защитное поле активно. Ты можешь либо попытаться деактивировать его с консоли, либо разбить контейнер и схватить чип, рискуя его повредить и активировать тревогу.\",\n      \"choices\": [\n        {\n          \"text\": \"Осторожно деактивировать поле через консоль.\",\n          \"next_scene\": \"ending_good\",\n          \"effects\": {\n            \"sanity\": -10\n          }\n        },\n        {\n          \"text\": \"Разбить контейнер и бежать!\",\n          \"next_scene\": \"ending_neutral\",\n          \"effects\": {\n            \"notoriety\": 30\n          }\n        }\n      ]\n    },\n    {\n      \"scene_id\": \"ending_good\",\n      \"text\": \"Сделка совершена. Кредиты на твоем счету. Ты снова растворяешься в неоновых тенях города, став еще одной легендой, которую шепотом пересказывают в барах. Никто не знает твоего имени. Ты — призрак в сети. Свободен. Пока что.\",\n      \"choices\": []\n    },\n    {\n      \"scene_id\": \"ending_neutral\",\n      \"text\": \"Ты доставил чип, но он слегка поврежден. Оплаты хватит, чтобы залечь на дно на пару месяцев. Но OmniCorp теперь знает о тебе. Твое имя в их черных списках, а по городу рыщут охотники за головами. Каждый день теперь — это взгляд через плечо.\",\n      \"choices\": []\n    },\n    {\n      \"scene_id\": \"ending_bad\",\n      \"text\": \"Силовой путь привел к катастрофе. Тебя зажали в коридоре элитные силы безопасности OmniCorp. Ты получил чип, но заплатил за него своей свободой. Холодные стены корпоративной тюрьмы — твой новый дом. Игра окончена.\",\n      \"choices\": []\n    },\n    {\n      \"scene_id\": \"ending_coward\",\n      \"text\": \"Ты проигнорировал сообщение. Жизнь продолжается: та же убогая квартира, та же дешевая лапша. Ты в безопасности. Но каждую ночь, глядя на неоновые огни, ты думаешь о упущенном шансе. И эта мысль будет преследовать тебя до конца.\",\n      \"choices\": []\n    },\n    {\n      \"scene_id\": \"game_over_sanity\",\n      \"text\": \"Тени сгущаются. Каждый шорох кажется шагами врага. Стены давят, а эхо в голове не замолкает. Паранойя победила. Ты больше не можешь отличить реальность от глюков интерфейса. Рассудок покинул тебя в этом холодном, безразличном городе.\",\n      \"choices\": []\n    }\n  ]\n}\n\n[END OPAL PROTOCOL] "}],"role":"user"},"b-system-instruction":{"role":"user","parts":[{"text":"You are working as part of an AI system, so no chit-chat and no explaining what you're doing and why.\nDO NOT start with \"Okay\", or \"Alright\" or any preambles. Just the output, please."}]},"config$ask-user":false,"generation-mode":"text-2.0-flash"}}],"edges":[{"from":"8d056e0a-c4c0-4c87-8538-8a7fde93e40f","to":"22e1f4d4-fcd0-4e64-a61b-a486e7cdefb9","out":"context","in":"p-z-8d056e0a-c4c0-4c87-8538-8a7fde93e40f"},{"from":"22e1f4d4-fcd0-4e64-a61b-a486e7cdefb9","to":"ea2c1b5e-1e14-4428-9628-fe74c245e285","out":"context","in":"p-z-22e1f4d4-fcd0-4e64-a61b-a486e7cdefb9"}],"url":"drive:/1DnTEGzjROvnUb0lTXvMhyP7hzBBZmYPF","metadata":{"visual":{"presentation":{"themes":{"ee5aabd4-35c9-4961-88b0-28fba4037920":{"themeColors":{"primaryColor":"#1a1a1a","secondaryColor":"#7a7a7a","backgroundColor":"#ffffff","textColor":"#1a1a1a","primaryTextColor":"#ffffff"},"template":"basic","isDefaultTheme":true,"palette":{"primary":{"0":"#000000","5":"#001417","10":"#001f24","15":"#002b30","20":"#00363d","25":"#00424a","30":"#004f58","35":"#005b66","40":"#006874","50":"#008391","60":"#00a0b0","70":"#22bccf","80":"#4fd8eb","90":"#97f0ff","95":"#d0f8ff","98":"#edfcff","99":"#f6feff","100":"#ffffff"},"secondary":{"0":"#000000","5":"#001417","10":"#051f23","15":"#10292d","20":"#1c3438","25":"#273f43","30":"#334b4f","35":"#3e565b","40":"#4a6267","50":"#637b80","60":"#7c959a","70":"#96b0b4","80":"#b1cbd0","90":"#cde7ec","95":"#dbf6fa","98":"#edfcff","99":"#f6feff","100":"#ffffff"},"tertiary":{"0":"#000000","5":"#030f2c","10":"#0e1b37","15":"#192541","20":"#24304d","25":"#2f3b58","30":"#3b4664","35":"#465271","40":"#525e7d","50":"#6b7697","60":"#8490b2","70":"#9faace","80":"#bac6ea","90":"#dae2ff","95":"#eef0ff","98":"#faf8ff","99":"#fefbff","100":"#ffffff"},"neutral":{"0":"#000000","5":"#0e1212","10":"#191c1d","15":"#232627","20":"#2e3132","25":"#393c3d","30":"#444748","35":"#505354","40":"#5c5f5f","50":"#747878","60":"#8e9192","70":"#a9acac","80":"#c4c7c7","90":"#e1e3e3","95":"#eff1f1","98":"#f8fafa","99":"#fafdfd","100":"#ffffff"},"neutralVariant":{"0":"#000000","5":"#091214","10":"#141d1f","15":"#1e2729","20":"#293234","25":"#343d3f","30":"#3f484a","35":"#4b5456","40":"#576062","50":"#6f797a","60":"#899294","70":"#a3adaf","80":"#bfc8ca","90":"#dbe4e6","95":"#e9f2f4","98":"#f2fbfd","99":"#f6feff","100":"#ffffff"},"error":{"0":"#000000","5":"#2d0001","10":"#410002","15":"#540003","20":"#690005","25":"#7e0007","30":"#93000a","35":"#a80710","40":"#ba1a1a","50":"#de3730","60":"#ff5449","70":"#ff897d","80":"#ffb4ab","90":"#ffdad6","95":"#ffedea","98":"#fff8f7","99":"#fffbff","100":"#ffffff"}}},"55157080-1fa8-4ac1-8645-0169ddd45161":{"template":"basic","templateAdditionalOptions":{},"palette":{"primary":{"0":"#000000","5":"#190f00","10":"#271900","15":"#342300","20":"#412d00","25":"#503700","30":"#5e4200","35":"#6d4d00","40":"#7c5800","50":"#9c6f00","60":"#bc8700","70":"#dda011","80":"#fcbb33","90":"#ffdea8","95":"#ffeed8","98":"#fff8f3","99":"#fffbff","100":"#ffffff"},"secondary":{"0":"#000000","5":"#190f00","10":"#251a04","15":"#30240c","20":"#3c2e15","25":"#48391f","30":"#54442a","35":"#605034","40":"#6d5c3f","50":"#877456","60":"#a28e6e","70":"#bda887","80":"#dac3a0","90":"#f7dfbb","95":"#ffeed8","98":"#fff8f3","99":"#fffbff","100":"#ffffff"},"tertiary":"","error":{"0":"#000000","5":"#2d0001","10":"#410002","15":"#540003","20":"#690005","25":"#7e0007","30":"#93000a","35":"#a80710","40":"#ba1a1a","50":"#de3730","60":"#ff5449","70":"#ff897d","80":"#ffb4ab","90":"#ffdad6","95":"#ffedea","98":"#fff8f7","99":"#fffbff","100":"#ffffff"},"neutral":{"0":"#000000","5":"#14100c","10":"#1e1b16","15":"#292520","20":"#34302a","25":"#3f3b35","30":"#4b4640","35":"#57524b","40":"#635e57","50":"#7c766f","60":"#969088","70":"#b1aaa2","80":"#cdc5bd","90":"#eae1d9","95":"#f8efe7","98":"#fff8f3","99":"#fffbff","100":"#ffffff"},"neutralVariant":{"0":"#000000","5":"#161007","10":"#211b10","15":"#2c251a","20":"#372f24","25":"#423a2e","30":"#4e4639","35":"#5a5144","40":"#665d4f","50":"#807667","60":"#9a8f80","70":"#b5aa99","80":"#d1c5b4","90":"#eee1cf","95":"#fdefdd","98":"#fff8f3","99":"#fffbff","100":"#ffffff"}},"themeColors":{"primaryColor":"","secondaryColor":"","backgroundColor":"","primaryTextColor":"","textColor":""},"splashScreen":{"storedData":{"handle":"drive:/1p08840_kw3XRmo3hw3SJyDFRa3JBE9YL","mimeType":"image/png","contentLength":818008}}}},"theme":"ee5aabd4-35c9-4961-88b0-28fba4037920"}},"parameters":{}},"assets":{"eb9a39ac-ab61-4c9e-859c-c9ae91b1af8a":{"data":[{"parts":[{"text":"Жанр:  «ТВысокое фэнтези»\nГлавный герой: «Молодой феодал, наследник одного из мудрецов, который хранит первый Осколок Истины»\nЦель: «Найти союзников среди других лордов и собрать разрозненные Осколки Истины, чтобы восстановить артефакт 'Священное знание' и остановить войну»"}],"role":"user"}],"metadata":{"title":"Жанр, гг и его цель","type":"content","description":"","subType":"","visual":{"x":-100,"y":420},"managed":false}},"79d819ee-b619-4c7f-bfa5-b2942feac190":{"data":[{"parts":[{"text":"5"}],"role":"user"}],"metadata":{"title":"Кол-во сцен","type":"content","description":"","subType":"","visual":{"x":-100,"y":220},"managed":false}},"41ca712e-2fbf-4d07-871b-400f086d69b7":{"data":[{"parts":[{"text":"Классический Героический Эпос"}],"role":"user"}],"metadata":{"title":"Стиль общения в диалогах","type":"content","description":"","subType":"","visual":{"x":-100,"y":320},"managed":false}}}}
